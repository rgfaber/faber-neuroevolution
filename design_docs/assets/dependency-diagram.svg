<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 550" width="750" height="550">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568"/>
    </marker>
    <linearGradient id="appGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9f7aea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#805ad5;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="libGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="infraGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4299e1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3182ce;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="750" height="550" fill="#f7fafc" rx="8"/>

  <!-- APPLICATIONS section -->
  <rect x="20" y="20" width="710" height="130" rx="8" fill="#faf5ff" stroke="#9f7aea" stroke-width="2"/>
  <text x="40" y="45" fill="#6b46c1" font-family="sans-serif" font-size="12" font-weight="bold">APPLICATIONS</text>

  <!-- macula-neurolab box -->
  <rect x="40" y="55" width="200" height="80" rx="6" fill="url(#appGrad)" stroke="#6b46c1" stroke-width="2"/>
  <text x="140" y="75" text-anchor="middle" fill="white" font-family="monospace" font-size="11" font-weight="bold">macula-neurolab</text>
  <text x="140" y="90" text-anchor="middle" fill="#e9d8fd" font-family="monospace" font-size="9">(Phoenix UI)</text>
  <text x="55" y="108" fill="white" font-family="monospace" font-size="8">TrainingCoordinator</text>
  <text x="55" y="120" fill="white" font-family="monospace" font-size="8">LiveView components</text>

  <!-- other-neuro-app box -->
  <rect x="280" y="55" width="200" height="80" rx="6" fill="url(#appGrad)" stroke="#6b46c1" stroke-width="2"/>
  <text x="380" y="75" text-anchor="middle" fill="white" font-family="monospace" font-size="11" font-weight="bold">other-neuro-app</text>
  <text x="380" y="90" text-anchor="middle" fill="#e9d8fd" font-family="monospace" font-size="9">(CLI, API, etc.)</text>
  <text x="295" y="108" fill="white" font-family="monospace" font-size="8">Uses events</text>
  <text x="295" y="120" fill="white" font-family="monospace" font-size="8">Custom evaluators</text>

  <!-- Dependency arrows from apps -->
  <line x1="140" y1="135" x2="200" y2="180" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="380" y1="135" x2="350" y2="180" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="220" y="165" fill="#718096" font-family="sans-serif" font-size="9">depends on</text>

  <!-- LIBRARIES section -->
  <rect x="20" y="175" width="710" height="220" rx="8" fill="#f0fff4" stroke="#48bb78" stroke-width="2"/>
  <text x="40" y="200" fill="#276749" font-family="sans-serif" font-size="12" font-weight="bold">LIBRARIES</text>

  <!-- faber-neuroevolution box (large) -->
  <rect x="40" y="210" width="550" height="170" rx="6" fill="url(#libGrad)" stroke="#276749" stroke-width="2"/>
  <text x="315" y="232" text-anchor="middle" fill="white" font-family="monospace" font-size="12" font-weight="bold">faber-neuroevolution</text>

  <!-- Internal modules -->
  <rect x="55" y="245" width="150" height="55" rx="4" fill="#276749" stroke="#48bb78"/>
  <text x="130" y="262" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">neuroevolution_server</text>
  <text x="65" y="278" fill="#c6f6d5" font-family="monospace" font-size="8">Population mgmt</text>
  <text x="65" y="290" fill="#c6f6d5" font-family="monospace" font-size="8">Publishes events</text>

  <rect x="215" y="245" width="150" height="55" rx="4" fill="#276749" stroke="#48bb78"/>
  <text x="290" y="262" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">neuroevolution_events</text>
  <text x="225" y="278" fill="#c6f6d5" font-family="monospace" font-size="8">Event behaviour</text>
  <text x="225" y="290" fill="#c6f6d5" font-family="monospace" font-size="8">Local/Macula backend</text>

  <rect x="375" y="245" width="150" height="55" rx="4" fill="#276749" stroke="#48bb78"/>
  <text x="450" y="262" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">elixir_evaluator_bridge</text>
  <text x="385" y="278" fill="#c6f6d5" font-family="monospace" font-size="8">Calls Elixir</text>
  <text x="385" y="290" fill="#c6f6d5" font-family="monospace" font-size="8">Generic</text>

  <rect x="55" y="310" width="150" height="55" rx="4" fill="#276749" stroke="#48bb78"/>
  <text x="130" y="327" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">neuroevolution_evaluator</text>
  <text x="65" y="343" fill="#c6f6d5" font-family="monospace" font-size="8">Behaviour</text>
  <text x="65" y="355" fill="#c6f6d5" font-family="monospace" font-size="8">evaluate/2</text>

  <rect x="215" y="310" width="150" height="55" rx="4" fill="#276749" stroke="#48bb78"/>
  <text x="290" y="327" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">neuroevolution_worker</text>
  <text x="225" y="343" fill="#c6f6d5" font-family="monospace" font-size="8">Subscribes to topic</text>
  <text x="225" y="355" fill="#c6f6d5" font-family="monospace" font-size="8">Runs evaluators</text>

  <rect x="375" y="310" width="150" height="55" rx="4" fill="#276749" stroke="#48bb78"/>
  <text x="450" y="327" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">neuroevolution_genetic</text>
  <text x="385" y="343" fill="#c6f6d5" font-family="monospace" font-size="8">Crossover</text>
  <text x="385" y="355" fill="#c6f6d5" font-family="monospace" font-size="8">Mutation</text>

  <!-- Dependency arrows to infrastructure -->
  <line x1="315" y1="380" x2="315" y2="420" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="330" y="410" fill="#718096" font-family="sans-serif" font-size="9">depends on</text>

  <!-- INFRASTRUCTURE section -->
  <rect x="20" y="415" width="710" height="120" rx="8" fill="#ebf8ff" stroke="#4299e1" stroke-width="2"/>
  <text x="40" y="440" fill="#2b6cb0" font-family="sans-serif" font-size="12" font-weight="bold">INFRASTRUCTURE</text>

  <!-- faber-tweann box -->
  <rect x="140" y="455" width="180" height="60" rx="6" fill="url(#infraGrad)" stroke="#2b6cb0" stroke-width="2"/>
  <text x="230" y="478" text-anchor="middle" fill="white" font-family="monospace" font-size="11" font-weight="bold">faber-tweann</text>
  <text x="155" y="495" fill="#bee3f8" font-family="monospace" font-size="8">network_evaluator</text>
  <text x="155" y="507" fill="#bee3f8" font-family="monospace" font-size="8">genotype, mutations</text>

  <!-- macula box -->
  <rect x="380" y="455" width="180" height="60" rx="6" fill="url(#infraGrad)" stroke="#2b6cb0" stroke-width="2"/>
  <text x="470" y="478" text-anchor="middle" fill="white" font-family="monospace" font-size="11" font-weight="bold">macula</text>
  <text x="395" y="495" fill="#bee3f8" font-family="monospace" font-size="8">DHT PubSub, RPC</text>
  <text x="395" y="507" fill="#bee3f8" font-family="monospace" font-size="8">Mesh transport</text>
</svg>