<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 420" width="750" height="420">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568"/>
    </marker>
    <marker id="arrowheadBack" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#4a5568"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="750" height="420" fill="#f7fafc" rx="8"/>

  <!-- Title -->
  <text x="375" y="20" text-anchor="middle" fill="#2d3748" font-family="sans-serif" font-size="14" font-weight="bold">Sequence Diagram: Evaluation (Proposed)</text>

  <!-- Actor boxes -->
  <rect x="40" y="35" width="110" height="45" rx="6" fill="#4299e1" stroke="#2b6cb0" stroke-width="2"/>
  <text x="95" y="52" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">neuroevol_server</text>
  <text x="95" y="68" text-anchor="middle" fill="#bee3f8" font-family="monospace" font-size="8">(Erlang)</text>

  <rect x="200" y="35" width="130" height="45" rx="6" fill="#48bb78" stroke="#276749" stroke-width="2"/>
  <text x="265" y="52" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">elixir_eval_bridge</text>
  <text x="265" y="68" text-anchor="middle" fill="#c6f6d5" font-family="monospace" font-size="8">(Erlang, in neuroevol)</text>

  <rect x="380" y="35" width="150" height="45" rx="6" fill="#9f7aea" stroke="#6b46c1" stroke-width="2"/>
  <text x="455" y="52" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">Neurolab.CartPole</text>
  <text x="455" y="68" text-anchor="middle" fill="#e9d8fd" font-family="monospace" font-size="8">(Elixir)</text>

  <rect x="580" y="35" width="130" height="45" rx="6" fill="#ed8936" stroke="#c05621" stroke-width="2"/>
  <text x="645" y="52" text-anchor="middle" fill="white" font-family="monospace" font-size="9" font-weight="bold">:network_evaluator</text>
  <text x="645" y="68" text-anchor="middle" fill="#fffaf0" font-family="monospace" font-size="8">(tweann)</text>

  <!-- Lifelines -->
  <line x1="95" y1="80" x2="95" y2="400" stroke="#4a5568" stroke-width="1" stroke-dasharray="5,3"/>
  <line x1="265" y1="80" x2="265" y2="400" stroke="#4a5568" stroke-width="1" stroke-dasharray="5,3"/>
  <line x1="455" y1="80" x2="455" y2="400" stroke="#4a5568" stroke-width="1" stroke-dasharray="5,3"/>
  <line x1="645" y1="80" x2="645" y2="400" stroke="#4a5568" stroke-width="1" stroke-dasharray="5,3"/>

  <!-- Message 1: evaluate -->
  <line x1="95" y1="110" x2="255" y2="110" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="175" y="105" text-anchor="middle" fill="#4a5568" font-family="monospace" font-size="9">evaluate(Ind, Opts)</text>

  <!-- Message 2: Module:evaluate -->
  <line x1="265" y1="150" x2="445" y2="150" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="355" y="145" text-anchor="middle" fill="#4a5568" font-family="monospace" font-size="9">Module:evaluate(Map, Opts)</text>

  <!-- Message 3: evaluate(Network, Inputs) -->
  <line x1="455" y1="190" x2="635" y2="190" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="545" y="185" text-anchor="middle" fill="#4a5568" font-family="monospace" font-size="9">evaluate(Network, Inputs)</text>

  <!-- Response 3: Outputs -->
  <line x1="635" y1="230" x2="465" y2="230" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="545" y="225" text-anchor="middle" fill="#718096" font-family="monospace" font-size="9">Outputs</text>

  <!-- Self call: physics sim -->
  <rect x="465" y="255" width="80" height="30" rx="4" fill="#faf5ff" stroke="#9f7aea"/>
  <text x="505" y="275" text-anchor="middle" fill="#6b46c1" font-family="monospace" font-size="8">physics sim</text>
  <line x1="455" y1="260" x2="465" y2="260" stroke="#9f7aea" stroke-width="1"/>
  <line x1="465" y1="285" x2="455" y2="285" stroke="#9f7aea" stroke-width="1"/>

  <!-- Response 2: {:ok, Metrics} -->
  <line x1="445" y1="320" x2="275" y2="320" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="355" y="315" text-anchor="middle" fill="#718096" font-family="monospace" font-size="9">{:ok, Metrics}</text>

  <!-- Response 1: {ok, Individual#individual{metrics=Metrics}} -->
  <line x1="255" y1="360" x2="105" y2="360" stroke="#4a5568" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="175" y="355" text-anchor="middle" fill="#718096" font-family="monospace" font-size="8">{ok, Ind#individual{metrics=M}}</text>
</svg>