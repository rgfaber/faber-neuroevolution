<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <defs>
    <linearGradient id="supGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1"/>
      <stop offset="100%" style="stop-color:#4f46e5"/>
    </linearGradient>
    <linearGradient id="siloGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="workerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    <linearGradient id="metaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowSup" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="700" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">Liquid Conglomerate Supervisor Architecture</text>
  <text x="450" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#64748b">OTP Supervision Tree with Cross-Silo Coordination</text>

  <!-- Main Supervisor Box -->
  <rect x="300" y="75" width="300" height="60" rx="10" fill="url(#supGrad)" filter="url(#shadow)"/>
  <text x="450" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">lc_supervisor</text>
  <text x="450" y="118" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#e0e7ff">one_for_one | intensity=5 | period=10</text>

  <!-- Supervision lines -->
  <line x1="450" y1="135" x2="450" y2="155" stroke="#64748b" stroke-width="2"/>

  <!-- Cross-Silo Coordinator (First Child) -->
  <rect x="50" y="165" width="180" height="55" rx="8" fill="url(#metaGrad)" filter="url(#shadow)"/>
  <text x="140" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">lc_cross_silo</text>
  <text x="140" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ddd6fe">Signal Router (18 signals)</text>

  <!-- Meta Controller (Optional) -->
  <rect x="360" y="165" width="180" height="55" rx="8" fill="url(#metaGrad)" filter="url(#shadow)"/>
  <text x="450" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">meta_controller</text>
  <text x="450" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ddd6fe">L2 Strategic (optional)</text>

  <!-- Connection lines from supervisor -->
  <path d="M350 135 Q350 150 140 165" stroke="#64748b" stroke-width="1.5" fill="none"/>
  <path d="M450 135 L450 165" stroke="#64748b" stroke-width="1.5"/>
  <path d="M550 135 Q550 150 760 165" stroke="#64748b" stroke-width="1.5" fill="none"/>

  <!-- Distribution Silo (Optional placeholder) -->
  <rect x="670" y="165" width="180" height="55" rx="8" fill="#94a3b8" filter="url(#shadow)"/>
  <text x="760" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">distribution_silo</text>
  <text x="760" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e2e8f0">(optional, mesh)</text>

  <!-- Horizontal divider -->
  <line x1="50" y1="240" x2="850" y2="240" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="450" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748b">Core Silos</text>

  <!-- ========== RESOURCE SILO COLUMN ========== -->
  <rect x="50" y="275" width="240" height="380" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
  <rect x="50" y="275" width="240" height="35" rx="10" fill="url(#siloGrad)"/>
  <rect x="50" y="300" width="240" height="10" fill="url(#siloGrad)"/>
  <text x="170" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">RESOURCE SILO</text>

  <!-- Resource L0 Sensors -->
  <rect x="70" y="325" width="200" height="50" rx="6" fill="url(#workerGrad)" filter="url(#shadow)"/>
  <text x="170" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">resource_l0_sensors</text>
  <text x="170" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fef3c7">CPU, Memory, Processes</text>

  <!-- Resource L0 Actuators -->
  <rect x="70" y="390" width="200" height="50" rx="6" fill="url(#workerGrad)" filter="url(#shadow)"/>
  <text x="170" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">resource_l0_actuators</text>
  <text x="170" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fef3c7">Throttle, GC, Concurrency</text>

  <!-- Resource Silo Main Controller -->
  <rect x="70" y="455" width="200" height="70" rx="6" fill="url(#siloGrad)" filter="url(#shadow)"/>
  <text x="170" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">resource_silo</text>
  <text x="170" y="495" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d1fae5">L0 TWEANN Controller</text>
  <text x="170" y="510" text-anchor="middle" font-family="monospace" font-size="8" fill="#d1fae5">tau = 5 (fast)</text>

  <!-- Resource metrics -->
  <rect x="70" y="540" width="200" height="100" rx="6" fill="white" stroke="#10b981" stroke-width="1"/>
  <text x="170" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#065f46">Manages</text>
  <text x="80" y="580" font-family="monospace" font-size="8" fill="#047857">- Memory pressure [0-1]</text>
  <text x="80" y="595" font-family="monospace" font-size="8" fill="#047857">- CPU utilization [0-1]</text>
  <text x="80" y="610" font-family="monospace" font-size="8" fill="#047857">- Max concurrency [1-50]</text>
  <text x="80" y="625" font-family="monospace" font-size="8" fill="#047857">- GC scheduling</text>

  <!-- ========== TASK SILO COLUMN ========== -->
  <rect x="330" y="275" width="240" height="380" rx="10" fill="#eff6ff" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
  <rect x="330" y="275" width="240" height="35" rx="10" fill="#3b82f6"/>
  <rect x="330" y="300" width="240" height="10" fill="#3b82f6"/>
  <text x="450" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">TASK SILO</text>

  <!-- Task L0 Sensors -->
  <rect x="350" y="325" width="200" height="50" rx="6" fill="url(#workerGrad)" filter="url(#shadow)"/>
  <text x="450" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">task_l0_sensors</text>
  <text x="450" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fef3c7">Fitness, Diversity, Stagnation</text>

  <!-- Task L0 Actuators -->
  <rect x="350" y="390" width="200" height="50" rx="6" fill="url(#workerGrad)" filter="url(#shadow)"/>
  <text x="450" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">task_l0_actuators</text>
  <text x="450" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fef3c7">Mutation, Selection, Topology</text>

  <!-- Task Silo Main Controller -->
  <rect x="350" y="455" width="200" height="70" rx="6" fill="#3b82f6" filter="url(#shadow)"/>
  <text x="450" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">task_silo</text>
  <text x="450" y="495" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#dbeafe">L0/L1/L2 Chain</text>
  <text x="450" y="510" text-anchor="middle" font-family="monospace" font-size="8" fill="#dbeafe">tau = 50 (medium)</text>

  <!-- Task metrics -->
  <rect x="350" y="540" width="200" height="100" rx="6" fill="white" stroke="#3b82f6" stroke-width="1"/>
  <text x="450" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1e40af">Manages</text>
  <text x="360" y="580" font-family="monospace" font-size="8" fill="#1d4ed8">- mutation_rate [0.01-0.5]</text>
  <text x="360" y="595" font-family="monospace" font-size="8" fill="#1d4ed8">- selection_ratio [0.1-0.5]</text>
  <text x="360" y="610" font-family="monospace" font-size="8" fill="#1d4ed8">- add_node_rate [0-0.1]</text>
  <text x="360" y="625" font-family="monospace" font-size="8" fill="#1d4ed8">- complexity_penalty</text>

  <!-- ========== CONFIGURATION COLUMN ========== -->
  <rect x="610" y="275" width="240" height="380" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
  <rect x="610" y="275" width="240" height="35" rx="10" fill="#f59e0b"/>
  <rect x="610" y="300" width="240" height="10" fill="#f59e0b"/>
  <text x="730" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">CONFIGURATION</text>

  <!-- Config sections -->
  <rect x="630" y="325" width="200" height="95" rx="6" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <text x="730" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#92400e">Supervisor Config</text>
  <text x="640" y="365" font-family="monospace" font-size="8" fill="#b45309">enable_meta_controller: bool</text>
  <text x="640" y="380" font-family="monospace" font-size="8" fill="#b45309">enable_l0_tweann: bool</text>
  <text x="640" y="395" font-family="monospace" font-size="8" fill="#b45309">enable_distribution_silo: bool</text>
  <text x="640" y="410" font-family="monospace" font-size="8" fill="#b45309">cross_silo: #{...}</text>

  <rect x="630" y="435" width="200" height="95" rx="6" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <text x="730" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#92400e">Meta Controller Config</text>
  <text x="640" y="475" font-family="monospace" font-size="8" fill="#b45309">network_topology: {11,[24,16,8],5}</text>
  <text x="640" y="490" font-family="monospace" font-size="8" fill="#b45309">neuron_type: cfc | ltc</text>
  <text x="640" y="505" font-family="monospace" font-size="8" fill="#b45309">time_constant: 50.0</text>
  <text x="640" y="520" font-family="monospace" font-size="8" fill="#b45309">learning_rate: 0.001</text>

  <rect x="630" y="545" width="200" height="95" rx="6" fill="white" stroke="#f59e0b" stroke-width="1"/>
  <text x="730" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#92400e">Chain Config (LTC)</text>
  <text x="640" y="585" font-family="monospace" font-size="8" fill="#b45309">l2_tau: 100.0 (strategic)</text>
  <text x="640" y="600" font-family="monospace" font-size="8" fill="#b45309">l1_tau: 50.0 (tactical)</text>
  <text x="640" y="615" font-family="monospace" font-size="8" fill="#b45309">l0_tau: 10.0 (reactive)</text>
  <text x="640" y="630" font-family="monospace" font-size="8" fill="#b45309">gamma: 0.95 (discount)</text>

  <!-- Legend -->
  <rect x="50" y="665" width="15" height="15" fill="url(#supGrad)"/>
  <text x="70" y="677" font-family="Arial, sans-serif" font-size="10" fill="#475569">Supervisor</text>
  <rect x="150" y="665" width="15" height="15" fill="url(#siloGrad)"/>
  <text x="170" y="677" font-family="Arial, sans-serif" font-size="10" fill="#475569">Silo Controller</text>
  <rect x="270" y="665" width="15" height="15" fill="url(#workerGrad)"/>
  <text x="290" y="677" font-family="Arial, sans-serif" font-size="10" fill="#475569">Sensors/Actuators</text>
  <rect x="410" y="665" width="15" height="15" fill="url(#metaGrad)"/>
  <text x="430" y="677" font-family="Arial, sans-serif" font-size="10" fill="#475569">Infrastructure</text>
  <text x="600" y="677" font-family="Arial, sans-serif" font-size="10" font-style="italic" fill="#64748b">Child order: cross_silo -> sensors -> actuators -> meta -> silos</text>
</svg>
