<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 560">
  <defs>
    <linearGradient id="stageGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fce7f3"/>
      <stop offset="20%" style="stop-color:#ddd6fe"/>
      <stop offset="40%" style="stop-color:#c4b5fd"/>
      <stop offset="60%" style="stop-color:#a78bfa"/>
      <stop offset="80%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#6b7280"/>
    </linearGradient>
    <linearGradient id="plasticityGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#22c55e"/>
      <stop offset="100%" style="stop-color:#dc2626"/>
    </linearGradient>
    <filter id="shadowDyn2" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="560" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1e293b">Developmental Dynamics: Stages, Plasticity, Critical Periods &amp; Metamorphosis</text>

  <!-- Developmental Stages Section -->
  <rect x="40" y="55" width="420" height="170" rx="10" fill="white" stroke="#a855f7" stroke-width="2" filter="url(#shadowDyn2)"/>
  <rect x="40" y="55" width="420" height="30" rx="10" fill="#a855f7"/>
  <rect x="40" y="75" width="420" height="10" fill="#a855f7"/>
  <text x="250" y="77" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Developmental Stages</text>

  <!-- Stage timeline -->
  <line x1="60" y1="130" x2="440" y2="130" stroke="#e5e7eb" stroke-width="2"/>

  <!-- Stage boxes -->
  <rect x="60" y="110" width="60" height="40" rx="4" fill="#fce7f3" stroke="#ec4899" stroke-width="1"/>
  <text x="90" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#be185d">Embryonic</text>

  <rect x="130" y="110" width="70" height="40" rx="4" fill="#ddd6fe" stroke="#a855f7" stroke-width="1"/>
  <text x="165" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7e22ce">Juvenile</text>

  <rect x="210" y="110" width="75" height="40" rx="4" fill="#c4b5fd" stroke="#8b5cf6" stroke-width="1"/>
  <text x="247" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#6d28d9">Adolescent</text>

  <rect x="295" y="110" width="80" height="40" rx="4" fill="#a78bfa" stroke="#7c3aed" stroke-width="1"/>
  <text x="335" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Adult</text>

  <rect x="385" y="110" width="55" height="40" rx="4" fill="#6b7280" stroke="#4b5563" stroke-width="1"/>
  <text x="412" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Senescent</text>

  <!-- Duration labels -->
  <text x="90" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">5 gen</text>
  <text x="165" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">15 gen</text>
  <text x="247" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">20 gen</text>
  <text x="335" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">40 gen</text>
  <text x="412" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">20 gen</text>

  <!-- Characteristics -->
  <text x="55" y="190" font-family="Arial, sans-serif" font-size="9" fill="#6b21a8">High plasticity</text>
  <text x="55" y="205" font-family="Arial, sans-serif" font-size="9" fill="#6b21a8">Fast growth</text>
  <text x="200" y="190" font-family="Arial, sans-serif" font-size="9" fill="#6b21a8">Critical periods active</text>
  <text x="200" y="205" font-family="Arial, sans-serif" font-size="9" fill="#6b21a8">Moderate plasticity</text>
  <text x="340" y="190" font-family="Arial, sans-serif" font-size="9" fill="#6b21a8">Stable, low plasticity</text>
  <text x="340" y="205" font-family="Arial, sans-serif" font-size="9" fill="#6b21a8">Canalized traits</text>

  <!-- Plasticity Decay Section -->
  <rect x="480" y="55" width="380" height="170" rx="10" fill="white" stroke="#22c55e" stroke-width="2" filter="url(#shadowDyn2)"/>
  <rect x="480" y="55" width="380" height="30" rx="10" fill="#22c55e"/>
  <rect x="480" y="75" width="380" height="10" fill="#22c55e"/>
  <text x="670" y="77" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Plasticity Decay</text>

  <!-- Plasticity curve -->
  <path d="M510 200 Q550 110, 600 140 Q650 160, 700 170 Q750 180, 800 185 L830 185"
        stroke="#22c55e" stroke-width="3" fill="none"/>

  <!-- Axis -->
  <line x1="510" y1="200" x2="830" y2="200" stroke="#cbd5e1" stroke-width="1"/>
  <line x1="510" y1="100" x2="510" y2="200" stroke="#cbd5e1" stroke-width="1"/>

  <!-- Labels -->
  <text x="505" y="105" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">1.0</text>
  <text x="505" y="200" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">0.1</text>
  <text x="520" y="215" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">Birth</text>
  <text x="660" y="215" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">Age</text>
  <text x="820" y="215" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">Mature</text>

  <!-- Min plasticity line -->
  <line x1="510" y1="185" x2="830" y2="185" stroke="#dc2626" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="835" y="188" font-family="Arial, sans-serif" font-size="8" fill="#dc2626">min</text>

  <!-- Formula -->
  <text x="670" y="145" text-anchor="middle" font-family="monospace" font-size="9" fill="#166534">plasticity(t+1) = plasticity(t) * (1 - decay_rate)</text>

  <!-- Critical Periods Section -->
  <rect x="40" y="240" width="420" height="150" rx="10" fill="white" stroke="#3b82f6" stroke-width="2" filter="url(#shadowDyn2)"/>
  <rect x="40" y="240" width="420" height="30" rx="10" fill="#3b82f6"/>
  <rect x="40" y="260" width="420" height="10" fill="#3b82f6"/>
  <text x="250" y="262" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Critical Periods</text>

  <!-- Timeline -->
  <line x1="60" y1="320" x2="440" y2="320" stroke="#e5e7eb" stroke-width="2"/>

  <!-- Critical period windows -->
  <rect x="70" y="300" width="60" height="40" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="100" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1e40af">Sensory</text>

  <rect x="140" y="300" width="70" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="175" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#b45309">Motor</text>

  <rect x="220" y="300" width="80" height="40" rx="4" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="260" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#166534">Cognitive</text>

  <rect x="310" y="300" width="70" height="40" rx="4" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
  <text x="345" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#be185d">Social</text>

  <!-- Learning multiplier -->
  <text x="60" y="360" font-family="Arial, sans-serif" font-size="10" fill="#1e40af">During critical period:</text>
  <text x="60" y="375" font-family="monospace" font-size="9" fill="#1e40af">learning_rate *= 2.0</text>

  <!-- Stage labels -->
  <text x="100" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">Embryonic</text>
  <text x="200" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">Juvenile</text>
  <text x="300" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">Adolescent</text>

  <!-- Metamorphosis Section -->
  <rect x="480" y="240" width="380" height="150" rx="10" fill="white" stroke="#f97316" stroke-width="2" filter="url(#shadowDyn2)"/>
  <rect x="480" y="240" width="380" height="30" rx="10" fill="#f97316"/>
  <rect x="480" y="260" width="380" height="10" fill="#f97316"/>
  <text x="670" y="262" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Metamorphosis</text>

  <!-- Before/After metamorphosis -->
  <rect x="510" y="290" width="100" height="60" rx="6" fill="#fee2e2" stroke="#dc2626" stroke-width="1"/>
  <text x="560" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#dc2626">Before</text>
  <text x="560" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#dc2626">Plasticity: 0.2</text>
  <text x="560" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#dc2626">Canalized: 0.8</text>

  <!-- Arrow -->
  <path d="M620 320 L660 320" stroke="#f97316" stroke-width="3" marker-end="url(#arrowDev)"/>
  <text x="640" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#f97316">TRIGGER</text>

  <rect x="680" y="290" width="100" height="60" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="730" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#166534">After</text>
  <text x="730" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">Plasticity: 0.7</text>
  <text x="730" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#166534">Canalized: 0.2</text>

  <!-- Metamorphosis formula -->
  <text x="500" y="375" font-family="monospace" font-size="8" fill="#c2410c">new_plasticity = initial * severity + old * (1 - severity)</text>

  <!-- Canalization Section -->
  <rect x="40" y="405" width="270" height="140" rx="10" fill="white" stroke="#64748b" stroke-width="2" filter="url(#shadowDyn2)"/>
  <rect x="40" y="405" width="270" height="30" rx="10" fill="#64748b"/>
  <rect x="40" y="425" width="270" height="10" fill="#64748b"/>
  <text x="175" y="427" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Canalization</text>

  <!-- Canalization diagram -->
  <text x="55" y="460" font-family="Arial, sans-serif" font-size="10" fill="#374151">Resistance to perturbation:</text>

  <!-- Low canalization -->
  <rect x="60" y="475" width="80" height="25" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
  <text x="100" y="492" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#b45309">Low (0.2)</text>
  <text x="150" y="492" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">= High variability</text>

  <!-- High canalization -->
  <rect x="60" y="510" width="80" height="25" rx="4" fill="#d1fae5" stroke="#22c55e"/>
  <text x="100" y="527" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#166534">High (0.9)</text>
  <text x="150" y="527" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">= Stable traits</text>

  <!-- Heterochrony Section -->
  <rect x="330" y="405" width="260" height="140" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadowDyn2)"/>
  <rect x="330" y="405" width="260" height="30" rx="10" fill="#8b5cf6"/>
  <rect x="330" y="425" width="260" height="10" fill="#8b5cf6"/>
  <text x="460" y="427" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Heterochrony</text>

  <!-- Heterochrony diagram -->
  <text x="345" y="460" font-family="Arial, sans-serif" font-size="10" fill="#5b21b6">Timing variation from population:</text>

  <!-- Distribution curve -->
  <ellipse cx="460" cy="500" rx="80" ry="25" fill="#ede9fe" stroke="#8b5cf6"/>
  <line x1="460" y1="475" x2="460" y2="525" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="460" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6b7280">population mean</text>

  <!-- Early/Late markers -->
  <circle cx="400" cy="500" r="5" fill="#22c55e"/>
  <text x="400" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#166534">early</text>
  <circle cx="520" cy="500" r="5" fill="#dc2626"/>
  <text x="520" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#dc2626">late</text>

  <!-- Control Loop Section -->
  <rect x="610" y="405" width="250" height="140" rx="10" fill="white" stroke="#cbd5e1" stroke-width="1"/>
  <text x="735" y="428" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e293b">Control Loop</text>

  <text x="625" y="450" font-family="Arial, sans-serif" font-size="9" fill="#334155">
    <tspan font-weight="bold">1.</tspan> Advance age
  </text>
  <text x="625" y="468" font-family="Arial, sans-serif" font-size="9" fill="#334155">
    <tspan font-weight="bold">2.</tspan> Decay plasticity
  </text>
  <text x="625" y="486" font-family="Arial, sans-serif" font-size="9" fill="#334155">
    <tspan font-weight="bold">3.</tspan> Check stage transition
  </text>
  <text x="625" y="504" font-family="Arial, sans-serif" font-size="9" fill="#334155">
    <tspan font-weight="bold">4.</tspan> Manage critical periods
  </text>
  <text x="625" y="522" font-family="Arial, sans-serif" font-size="9" fill="#334155">
    <tspan font-weight="bold">5.</tspan> Check metamorphosis
  </text>
  <text x="625" y="540" font-family="Arial, sans-serif" font-size="9" fill="#334155">
    <tspan font-weight="bold">6.</tspan> Emit developmental events
  </text>
</svg>
