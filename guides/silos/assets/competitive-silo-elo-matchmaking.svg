<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 480">
  <defs>
    <linearGradient id="eloGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f87171"/>
      <stop offset="100%" style="stop-color:#ef4444"/>
    </linearGradient>
    <linearGradient id="winGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e"/>
      <stop offset="100%" style="stop-color:#16a34a"/>
    </linearGradient>
    <linearGradient id="archiveGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <marker id="matchArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>
    <filter id="shadowElo" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="850" height="480" fill="#f8fafc"/>

  <!-- Title -->
  <text x="425" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1e293b">Elo Rating &amp; Matchmaking System</text>

  <!-- Elo Distribution Box -->
  <rect x="40" y="60" width="250" height="190" rx="10" fill="white" stroke="#ef4444" stroke-width="2" filter="url(#shadowElo)"/>
  <rect x="40" y="60" width="250" height="30" rx="10" fill="url(#eloGrad)"/>
  <rect x="40" y="80" width="250" height="10" fill="url(#eloGrad)"/>
  <text x="165" y="82" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Elo Distribution</text>

  <!-- Elo bell curve visualization -->
  <path d="M60 220 Q90 220 100 200 Q110 180 130 140 Q150 100 165 100 Q180 100 200 140 Q220 180 230 200 Q240 220 270 220"
        stroke="#ef4444" stroke-width="2" fill="none"/>
  <line x1="60" y1="220" x2="270" y2="220" stroke="#94a3b8" stroke-width="1"/>

  <!-- Elo markers -->
  <text x="60" y="235" font-family="Arial, sans-serif" font-size="9" fill="#64748b">1000</text>
  <text x="155" y="235" font-family="Arial, sans-serif" font-size="9" fill="#64748b">1500</text>
  <text x="250" y="235" font-family="Arial, sans-serif" font-size="9" fill="#64748b">2000</text>

  <!-- Mean marker -->
  <line x1="165" y1="100" x2="165" y2="220" stroke="#dc2626" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="165" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#dc2626">mean=1500</text>

  <!-- Matchmaking Box -->
  <rect x="310" y="60" width="230" height="190" rx="10" fill="white" stroke="#f59e0b" stroke-width="2" filter="url(#shadowElo)"/>
  <rect x="310" y="60" width="230" height="30" rx="10" fill="#f59e0b"/>
  <rect x="310" y="80" width="230" height="10" fill="#f59e0b"/>
  <text x="425" y="82" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Matchmaking Strategy</text>

  <!-- Matchmaking pie chart -->
  <circle cx="425" cy="170" r="50" fill="#fef3c7" stroke="#f59e0b"/>
  <!-- Self-play slice (30%) -->
  <path d="M425 170 L425 120 A50 50 0 0 1 468 151 Z" fill="#ef4444"/>
  <!-- Archive slice (50%) -->
  <path d="M425 170 L468 151 A50 50 0 0 1 391 199 Z" fill="#8b5cf6"/>
  <!-- Current pop slice (20%) -->
  <path d="M425 170 L391 199 A50 50 0 0 1 425 120 Z" fill="#22c55e"/>

  <!-- Legend for pie -->
  <rect x="330" y="230" width="10" height="10" fill="#ef4444"/>
  <text x="345" y="239" font-family="Arial, sans-serif" font-size="9" fill="#334155">Self-play 30%</text>
  <rect x="410" y="230" width="10" height="10" fill="#8b5cf6"/>
  <text x="425" y="239" font-family="Arial, sans-serif" font-size="9" fill="#334155">Archive 50%</text>
  <rect x="490" y="230" width="10" height="10" fill="#22c55e"/>
  <text x="505" y="239" font-family="Arial, sans-serif" font-size="9" fill="#334155">Current 20%</text>

  <!-- Archive Box -->
  <rect x="560" y="60" width="250" height="190" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadowElo)"/>
  <rect x="560" y="60" width="250" height="30" rx="10" fill="url(#archiveGrad)"/>
  <rect x="560" y="80" width="250" height="10" fill="url(#archiveGrad)"/>
  <text x="685" y="82" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Opponent Archive</text>

  <!-- Archive opponents visualization -->
  <circle cx="600" cy="130" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="600" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1800</text>

  <circle cx="650" cy="120" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="650" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1650</text>

  <circle cx="700" cy="140" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="700" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1420</text>

  <circle cx="750" cy="125" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="750" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1550</text>

  <circle cx="625" cy="170" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="625" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1300</text>

  <circle cx="675" cy="180" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="675" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1720</text>

  <circle cx="725" cy="175" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="725" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1580</text>

  <circle cx="775" cy="165" r="15" fill="#c4b5fd" stroke="#7c3aed" stroke-width="2"/>
  <text x="775" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#5b21b6">1900</text>

  <text x="685" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#5b21b6">8 archived opponents</text>
  <text x="685" y="235" text-anchor="middle" font-family="monospace" font-size="9" fill="#7c3aed">threshold: 0.7 win rate</text>

  <!-- Match Execution Box -->
  <rect x="40" y="280" width="770" height="180" rx="8" fill="white" stroke="#cbd5e1" stroke-width="1"/>
  <text x="425" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e293b">Elo Update Formula &amp; Match Flow</text>

  <!-- Formula -->
  <text x="60" y="340" font-family="Arial, sans-serif" font-size="12" fill="#475569">Expected Score: E = 1 / (1 + 10^((Elo_opponent - Elo_self) / 400))</text>
  <text x="60" y="365" font-family="Arial, sans-serif" font-size="12" fill="#475569">New Elo: Elo' = Elo + K * (Actual - Expected)</text>

  <!-- Match example -->
  <rect x="60" y="385" width="300" height="60" rx="6" fill="#fef3c7" stroke="#f59e0b"/>
  <text x="80" y="405" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#b45309">Example Match:</text>
  <text x="80" y="420" font-family="monospace" font-size="9" fill="#92400e">Player A (1600) vs Player B (1400), A wins</text>
  <text x="80" y="435" font-family="monospace" font-size="9" fill="#92400e">E_A = 0.76, K=32 → A gains +8, B loses -8</text>

  <!-- Elo change visualization -->
  <rect x="380" y="385" width="200" height="60" rx="6" fill="#dcfce7" stroke="#22c55e"/>
  <text x="480" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#166534">After Match:</text>
  <text x="400" y="420" font-family="monospace" font-size="9" fill="#14532d">Player A: 1600 → 1608 (+8)</text>
  <text x="400" y="435" font-family="monospace" font-size="9" fill="#14532d">Player B: 1400 → 1392 (-8)</text>

  <!-- Upset bonus -->
  <rect x="600" y="385" width="190" height="60" rx="6" fill="#fce7f3" stroke="#ec4899"/>
  <text x="695" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#9d174d">Upset Bonus:</text>
  <text x="620" y="420" font-family="monospace" font-size="9" fill="#be185d">If B had won:</text>
  <text x="620" y="435" font-family="monospace" font-size="9" fill="#be185d">B gains +24, A loses -24</text>
</svg>
